<br/>
<p align="center">
  <img src="https://github.com/shinkuan/RandomStuff/assets/35415788/db94b436-c3d4-4c57-893e-8db2074d2d22" width="50%">
  <h1 align="center">Akagi</h1>

  <p align="center">
ã€Œæ­»ã­ã°åŠ©ã‹ã‚‹ã®ã«â€¦â€¦â€¦ã€- èµ¤æœ¨ã—ã’ã‚‹<br>
<br>
    <br/>
    <br/>
    <a href="https://discord.gg/Z2wjXUK8bN">æœ‰å•é¡Œè«‹è‡³ Discord è©¢å•</a>
    <br/>
    <br/>
    <a href="./README.md">English</a>
    <br/>
    <a href="https://github.com/shinkuan/Akagi/issues">å›å ±éŒ¯èª¤</a>
    .
    <a href="https://github.com/shinkuan/Akagi/issues">åŠŸèƒ½è«‹æ±‚</a>
  </p>
</p>

<p align="center">
  <a href="https://github.com/shinkuan/Akagi"><img src="https://img.shields.io/github/stars/shinkuan/Akagi?logo=github" alt="GitHub stars" /></a>
  <a href="https://github.com/shinkuan/Akagi/releases"><img src="https://img.shields.io/github/v/release/shinkuan/Akagi?label=release&logo=github" alt="GitHub release" /></a>
  <a href="https://github.com/shinkuan/Akagi/issues"><img src="https://img.shields.io/github/issues/shinkuan/Akagi?logo=github" alt="GitHub issues" /></a>
  <a href="https://github.com/shinkuan/Akagi"><img src="https://img.shields.io/github/languages/top/shinkuan/Akagi?logo=python" alt="Top language" /></a>
  <a href="https://discord.gg/Z2wjXUK8bN"><img src="https://img.shields.io/discord/1192792431364673577?label=discord&logo=discord&color=7289DA" alt="Discord" /></a>
  <a href="https://deepwiki.com/shinkuan/Akagi"><img src="https://deepwiki.com/badge.svg" alt="Ask DeepWiki"></a>
</p>

# Playwright


é€™å€‹Branchåˆ©ç”¨ **Playwright** æä¾›ä½¿ç”¨è€…æ›´ç°¡ä¾¿ä¸”æ›´ç©©å®šæµæš¢çš„é«”é©—ã€‚æ­¤branchçš„ä¸€å€‹ä¸»è¦å„ªå‹¢æ˜¯ç„¡éœ€è¤‡é›œçš„ä»£ç†è¨­å®šï¼›**ä¸å†éœ€è¦è¨­å®š mitmproxy æˆ– Proxifier ç­‰å·¥å…·**è€Œä¸”**å…§å»ºè‡ªå‹•æ‰“ç‰Œ**åŠŸèƒ½ï¼Œ**å…è¨±è‡ªå‹•åŒ–ä»»å‹™åœ¨èƒŒæ™¯ä¸­é‹è¡Œ**ã€‚

TL;DR
- **ç„¡éœ€ mitmproxy æˆ– Proxifier**ã€‚
- **å…§å»ºè‡ªå‹•æ’­æ”¾**ã€‚
- **å¯åœ¨èƒŒæ™¯é‹è¡Œ**ã€‚

# é—œæ–¼

## ã€Œæœ¬å°ˆæ¡ˆæ—¨åœ¨æä¾›ä¸€å€‹ä¾¿åˆ©çš„æ–¹å¼ï¼Œè®“ç©å®¶å¯ä»¥å³æ™‚äº†è§£è‡ªå·±åœ¨éº»å°‡å°å±€ä¸­çš„è¡¨ç¾ï¼Œä¸¦è—‰æ­¤å­¸ç¿’èˆ‡é€²æ­¥ã€‚æ­¤å°ˆæ¡ˆåƒ…ä¾›æ•™è‚²ç”¨é€”ï¼Œä½œè€…ä¸å°ä½¿ç”¨è€…åˆ©ç”¨æ­¤å°ˆæ¡ˆæ¡å–çš„ä»»ä½•è¡Œç‚ºè² è²¬ã€‚è‹¥ä½¿ç”¨è€…é•åéŠæˆ²æœå‹™æ¢æ¬¾ï¼ŒéŠæˆ²é–‹ç™¼è€…èˆ‡ç™¼è¡Œå•†æœ‰æ¬Šé€²è¡Œè™•ç½®ï¼ŒåŒ…å«å¸³è™Ÿåœæ¬Šç­‰å¾Œæœï¼Œèˆ‡ä½œè€…ç„¡é—œã€‚ã€

![image](./docs/images/example_majsoul.png)

# åŠŸèƒ½
- å³æ™‚é¡¯ç¤ºå°å±€è³‡è¨Š
- å³æ™‚é¡¯ç¤º AI è©•ä¼°
- æ”¯æ´é›€é­‚ã€å¤©é³³ã€éº»é›€ä¸€ç•ªè¡—ã€å¤©æœˆ
- æ”¯æ´å››äººéº»å°‡èˆ‡ä¸‰äººéº»å°‡
- å¯ä½¿ç”¨å¤šç¨® AI æ¨¡å‹
  - å…§å»ºæ¨¡å‹
  - ç·šä¸Šä¼ºæœå™¨æ¨¡å‹
  - è‡ªè£½æ¨¡å‹
- è‡ªå‹•åŒ–å°å±€
  - *åªæœ‰åœ¨Windows Releaseç‰ˆä¸­é–‹å•Ÿot_serveræ™‚å¯ç”¨
- TUI ä»‹é¢
  - æ”¯æ´å¤šç¨®ä¸»é¡Œ

# ç›®éŒ„

### âš ï¸ ä»”ç´°é–±è®€ä»¥ä¸‹å…§å®¹å†é–‹å§‹ä½¿ç”¨ âš ï¸
### âš ï¸ ä»”ç´°é–±è®€ä»¥ä¸‹å…§å®¹å†é–‹å§‹ä½¿ç”¨ âš ï¸
### âš ï¸ ä»”ç´°é–±è®€ä»¥ä¸‹å…§å®¹å†é–‹å§‹ä½¿ç”¨ âš ï¸

- [é—œæ–¼](#é—œæ–¼)
- [é–‹å§‹å‰](#é–‹å§‹å‰)
- [å®‰è£](#å®‰è£)
- [ä½¿ç”¨æ–¹å¼](#ä½¿ç”¨æ–¹å¼)
- [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)
- [é–‹ç™¼è€…](#é–‹ç™¼è€…)
- [æˆæ¬Š](#æˆæ¬Š)

# é–‹å§‹å‰

> [!WARNING]  
> æ­¤åˆ†æ”¯ä¸éœ€è¦ä»»ä½•ä»£ç†å·¥å…·ï¼Œä¾‹å¦‚ mitmproxy æˆ– Proxifierã€‚
> ä¸‹æ–¹å½±ç‰‡ç‚ºä¸»åˆ†æ”¯å…§å®¹ã€‚

ğŸ¥[æ•™å­¸å½±ç‰‡é€£çµ](https://youtu.be/Z88Ncxbe2nw)

### ä½ å°‡éœ€è¦ï¼š

1. ä¸€å€‹ `mjai_bot`
   1. æ­¤é …ç›®å·²ç¶“åŒ…å«ä¸€å€‹å¯ç”¨çš„`mortal` mjai botåœ¨[é€™é‚Š](./mjai_bot/mortal)
      - ç”±æ–¼æª”æ¡ˆå¤§å°é™åˆ¶ï¼Œåœ¨`./mjai_bot/mortal`ä¸‹çš„`mortal.pth`æ˜¯ä¸€å€‹è¼ƒå°çš„æ¨¡å‹
      - ä¸å»ºè­°åœ¨å¯¦éš›å°å±€ä¸­ä½¿ç”¨
      - è‹¥æƒ³å–å¾—å…¶ä»–æ¨¡å‹ï¼Œå¯ä»¥å¾ [Discord](https://discord.gg/Z2wjXUK8bN) å–å¾—
      - è‹¥æƒ³å–ç”¨æ›´å¼·çš„ AI æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç·šä¸Šä¼ºæœå™¨æ¶è¨­çš„æ¨¡å‹
      - å¯å¾ [Discord](https://discord.gg/Z2wjXUK8bN) å–å¾— API é‡‘é‘°
   2. æˆ–è‡ªè¡Œè£½ä½œï¼Œè«‹åƒé–± [é–‹ç™¼è€…](#é–‹ç™¼è€…)
2. ä½¿ç”¨ Windows Terminal é–‹å•Ÿ Akagi æ‰èƒ½çœ‹åˆ°æ¼‚äº®çš„ TUI

> [!WARNING]  
> è«‹ä½¿ç”¨ Windows Terminalï¼Œå¦å‰‡ä»‹é¢é¡¯ç¤ºå°‡ç•°å¸¸

### æ”¯æ´çš„éº»å°‡éŠæˆ²ï¼š

**æ­¤åˆ†æ”¯åƒ…æ”¯æ´é›€é­‚ã€‚**
**å…¶ä»–éŠæˆ²è«‹ä½¿ç”¨ä¸»åˆ†æ”¯ã€‚**

| å¹³å°          | å››äººéº»å°‡       | ä¸‰äººéº»å°‡       | è‡ªå‹•æ‰“ç‰Œ |
| ------------- | ------------- | -------------- | -------- |
| __é›€é­‚__      | &check;       | &check;        |  &check; |
| __å¤©é³³__      | &cross;       | &cross;        |  &cross; |
| __éº»é›€ä¸€ç•ªè¡—__ | &cross;       | &cross;        |  &cross; |
| __å¤©æœˆ__      | &cross;       | &cross;        |  &cross; |


# å®‰è£

- ä¸€èˆ¬ä½¿ç”¨è€…ï¼š
  - å‰å¾€ [release é é¢](https://github.com/shinkuan/Akagi/releases)
  - ä¸‹è¼‰æœ€æ–°Playwrightç‰ˆ
  - è§£å£“ç¸® ZIP æª”æ¡ˆ
  - (Optional) å°‡ MJAI æ©Ÿå™¨äººæ”¾åˆ° `./Akagi/mjai_bot`
  - åŸ·è¡Œ `run_akagi.exe`
  - (Optional) åœ¨è¨­å®šä¸­è¼¸å…¥ç·šä¸Šä¼ºæœå™¨ API é‡‘é‘°
- é–‹ç™¼è€…ï¼š
  - clone æ­¤å°ˆæ¡ˆ
  - ä½¿ç”¨ Python 3.12
  - å®‰è£ç›¸ä¾å¥—ä»¶ `pip install -r requirements.txt`
  - ä½¿ç”¨ `python -m playwright install` å®‰è£ Playwright ç€è¦½å™¨
  - å°‡ MJAI æ©Ÿå™¨äººæ”¾åˆ° `./Akagi/mjai_bot`
    - å…§å»ºæ¨¡å‹ï¼šå°‡ `./mjai_bot/mortal/libriichi/libriichi-<version>-<platform>.<extension>` ç§»å‹•åˆ° `./mjai_bot/mortal/libriichi.<extension>`ã€‚
    - ä¸‰äººæ¨¡å‹äº¦åŒã€‚
  - åŸ·è¡Œ `run_akagi.py`

# ä½¿ç”¨æ–¹å¼


1. **æª¢æŸ¥è¨­å®šèˆ‡ AI æ¨¡å‹**
   1. é¸æ“‡æ¨¡å‹
      - é»é¸å·¦ä¸‹è§’çš„ã€ŒModelã€æŒ‰éˆ•
      - å¾æ¸…å–®ä¸­é¸æ“‡ä¸€å€‹æ¨¡å‹
      - è‹¥æ²’æœ‰æ¨¡å‹ï¼Œå¯å¾ [Discord](https://discord.gg/Z2wjXUK8bN) å–å¾—
      - å…§å»ºé è¨­æ¨¡å‹ç‚ºå¼± AI
      - __3 äººå°å±€è«‹é¸ 3P æ¨¡å‹ï¼__
      - __ä¸è¦ç”¨ 4P æ¨¡å‹åƒèˆ‡ 3 äººå°å±€ï¼__
   2. æª¢æŸ¥è¨­å®š
      - é»é¸å·¦ä¸‹è§’çš„ã€ŒSettingsã€æŒ‰éˆ•
      - æª¢æŸ¥è¨­å®šæ˜¯å¦æ­£ç¢º
      - è‹¥ä½ æœ‰å–å¾—ç·šä¸Šä¼ºæœå™¨ API é‡‘é‘°ï¼Œè«‹åœ¨è¨­å®šä¸­è¼¸å…¥
      - ç·šä¸Šä¼ºæœå™¨æä¾›æ›´å¼·çš„ AI æ¨¡å‹
      - å¯å¾ [Discord](https://discord.gg/Z2wjXUK8bN) å–å¾— API é‡‘é‘°
   3. å„²å­˜è¨­å®š
      - é»é¸ã€ŒSaveã€æŒ‰éˆ•
      - å°‡è¨­å®šå„²å­˜ä¸‹ä¾†
   4. é‡æ–°å•Ÿå‹• Akagi
      - é—œé–‰ Akagi ä¸¦é‡æ–°é–‹å•Ÿ
      - è¨­å®šæ‰æœƒå¥—ç”¨

4. **å•Ÿå‹•éŠæˆ²ç”¨æˆ¶ç«¯**
5. **åŠ å…¥å°å±€**
6. **æª¢æŸ¥ Akagi**
   1. ç¾åœ¨ä½ æ‡‰è©²èƒ½çœ‹åˆ° AI å¯¦æ™‚åˆ†æå°å±€
   2. è‹¥æ²’æœ‰ï¼Œè«‹æª¢æŸ¥è¨­å®šèˆ‡ Proxifier è¨­å®š
   3. æˆ–æ˜¯æª¢æŸ¥Logsï¼Œçœ‹çœ‹æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
   4. è‹¥æœ‰éŒ¯èª¤è¨Šæ¯ï¼Œå¯ä»¥åˆ° [Discord](https://discord.gg/Z2wjXUK8bN) å°‹æ±‚å”åŠ©

## æ“ä½œèªªæ˜

### Akagi

#### å•Ÿå‹• MITM ä»£ç†ä¼ºæœå™¨ï¼š
> [!IMPORTANT]
> ä¸‹åœ–çš„ MITM æ–‡å­—æ˜¯ä¸»åˆ†æ”¯çš„å…§å®¹ï¼Œå¦‚æœä½ ç”¨é€™å€‹åˆ†æ”¯ä½ æœƒçœ‹åˆ°Playwrightã€‚

![image](./docs/gifs/start_mitm.gif)

#### é¸æ“‡ AI æ¨¡å‹ï¼š
æ¨¡å‹å„²å­˜åœ¨ `./mjai_bot/` è³‡æ–™å¤¾
![image](./docs/gifs/select_model.gif)

#### è®Šæ›´è¨­å®šï¼š
> [!IMPORTANT]  
> é‡å•Ÿå¾Œè¨­å®šæ‰æœƒå¥—ç”¨

![image](./docs/gifs/settings.gif)

#### é–‹å•Ÿæ—¥èªŒï¼š
å‡ºç¾å•é¡Œæ™‚å¯é–‹å•Ÿæ—¥èªŒä»¥äº†è§£ç‹€æ³ï¼Œä¸¦é™„ä¸Šå›å ±
å„²å­˜è·¯å¾‘ï¼š`./logs/`
![image](./docs/gifs/logs_screen.gif)

#### åˆ‡æ› MJAI è³‡è¨Šè¦–çª—å…§å®¹ï¼š
é»é¸è©²è¦–çª—å³å¯åˆ‡æ›
![image](./docs/gifs/change_window.gif)

#### AutoPlay:
ç¢ºä¿éŠæˆ²ç”¨æˆ¶ç«¯çš„é¡¯ç¤ºæ¯”ä¾‹è¨­å®šç‚º 16:9
![image](./docs/images/autoplay_example/good.png)
![image](./docs/images/autoplay_example/bad_1.png)
![image](./docs/images/autoplay_example/bad_2.png)

#### æ›´æ›ä¸»é¡Œï¼š
![image](./docs/gifs/change_theme.gif)

#### ç«‹ç›´å®£å‘Š
ç”±æ–¼MJAIå”è­°çš„é™åˆ¶ï¼Œå»ºè­°æ¬„ç‚ºç«‹ç›´æ™‚ä¸¦ä¸æœƒé¡¯ç¤ºæ£„ç‰Œã€‚
ä½ å¿…é ˆæ‰‹å‹•é»æ“Šç«‹ç›´æŒ‰éˆ•ä¾†å®£å‘Šç«‹ç›´ã€‚
![image](./docs/gifs/call_reach.gif)

<!-- Trobleshooting -->
# å¸¸è¦‹å•é¡Œ

ä½ å¯ä»¥åˆ°[Discord](https://discord.gg/Z2wjXUK8bN)ä¸Šè©¢å•å•é¡Œã€‚

> [!TIP]
> è‹¥ä½ æœ‰ä»»ä½•å•é¡Œï¼Œè«‹é™„ä¸Šæ—¥èªŒæª”æ¡ˆï¼Œé€™æ¨£æˆ‘æ‰èƒ½æ›´å¿«åœ°å¹«åŠ©ä½ ã€‚
> æ—¥èªŒæª”æ¡ˆä½æ–¼ `./logs/` è³‡æ–™å¤¾ä¸­ã€‚

> [!NOTE]
> è‹¥ä½ åœ¨ä½¿ç”¨éç¨‹ä¸­é‡åˆ°ä»»ä½•å•é¡Œï¼Œä½ å¯ä»¥åˆ°Github Issuesé é¢å›å ±å•é¡Œã€‚
> æˆ–æ˜¯åˆ°[Discord](https://discord.gg/Z2wjXUK8bN)ä¸Šè©¢å•å•é¡Œã€‚

# é–‹ç™¼è€…

## å°ˆæ¡ˆçµæ§‹

- `./Akagi/` - å°ˆæ¡ˆä¸»è¦è³‡æ–™å¤¾
  - `akagi/` - Akagi çš„ Textual UI
  - `logs/` - æ—¥èªŒ
  - `playwright_client/` - Playwright ç”¨æˆ¶ç«¯
    - `bridge/` - éŠæˆ²ç”¨æˆ¶ç«¯èˆ‡ä¼ºæœå™¨çš„æ©‹æ¥å™¨ï¼Œç”¨ä¾†è½‰æ›ç‚º MJAI å”è­°
      - `majsoul/` - é›€é­‚æ©‹æ¥å™¨
  - `mjai_bot/` - MJAI æ©Ÿå™¨äºº
    - `base/` - æ©Ÿå™¨äººåŸºç¤é¡åˆ¥ï¼Œå¯åƒè€ƒè‡ªè£½æ©Ÿå™¨äºº
    - `*/` - å„ç¨® botï¼Œä¾‹å¦‚ `mortal/`
  - `settings/` - è¨­å®šæª”è³‡æ–™å¤¾
  - `run_akagi.py` - åŸ·è¡Œä¸»ç¨‹å¼

## æ©‹æ¥å™¨

> [!WARNING] 
> ä¸å»ºè­°åœ¨æ­¤åˆ†æ”¯ä¸Šå»ºç«‹è‡ªå·±çš„æ©‹æ¥å™¨ã€‚
> æ­¤åˆ†æ”¯åƒ…è¨­è¨ˆç”¨æ–¼é›€é­‚ã€‚
> å¦‚æœä½ æƒ³å»ºç«‹è‡ªå·±çš„æ©‹æ¥å™¨ï¼Œè«‹ä½¿ç”¨ä¸»åˆ†æ”¯ã€‚

## MJAI æ©Ÿå™¨äºº

è¦è£½ä½œ MJAI æ©Ÿå™¨äººï¼Œéœ€å¯¦ä½œ `mjai_bot/base/bot.py` ä¸­çš„ `Bot` é¡åˆ¥ã€‚

TODO: è£½ä½œä¸€å€‹ tsumogiri bot ç¯„ä¾‹

## TODO

- [x] æ”¯æ´ä¸‰äººéº»å°‡
- [x] æ”¯æ´ RiichiCity
- [x] ç«‹ç›´å¾Œæ¨è–¦åˆ‡ç‰Œ
- [ ] æ§“å¾Œæ¨è–¦åˆ‡ç‰Œï¼ˆæ¥µå°‘è¦‹ï¼‰

# ä½œè€…

- [Shinkuan](https://github.com/shinkuan/) - shinkuan318@gmail.com
- [Discord](https://discord.gg/Z2wjXUK8bN)


# æˆæ¬Šæ¢æ¬¾

```
â€œCommons Clauseâ€ License Condition v1.0

The Software is provided to you by the Licensor under the License, as defined below, subject to the following condition.

Without limiting other conditions in the License, the grant of rights under the License will not include, and the License does not grant to you, the right to Sell the Software.

For purposes of the foregoing, â€œSellâ€ means practicing any or all of the rights granted to you under the License to provide to third parties, for a fee or other consideration (including without limitation fees for hosting or consulting/ support services related to the Software), a product or service whose value derives, entirely or substantially, from the functionality of the Software. Any license notice or attribution required by the License must also include this Commons Clause License Condition notice.

Software: Akagi

License: GNU Affero General Public License version 3 with Commons Clause

Licensor: shinkuan
```
